{% extends "base.html" %}

{% block conteudo %}
<h2>Finalizar Pedido</h2>

<div style="display: flex; gap: 30px;">
    <div style="flex: 1; background: #f9f9f9; padding: 20px; border-radius: 8px;">
        <h3>Resumo</h3>
        <ul>
            {% for item in itens %}
            <li>{{ item.quantidade }}x {{ item.produto.nome }} - R$ {{ "%.2f"|format(item.subtotal) }}</li>
            {% endfor %}
        </ul>
        <hr>
        <h3>Total a Pagar: R$ {{ "%.2f"|format(total) }}</h3>
    </div>

    <div style="flex: 1;">
        <h3>Dados de Entrega e Pagamento</h3>
        <form method="POST">
            <label>Forma de Pagamento:</label><br>
            <select name="pagamento" required style="width: 100%; padding: 8px; margin-bottom: 15px;">
                <option value="Pix">Pix</option>
                <option value="Dinheiro">Dinheiro na Entrega</option>
                <option value="Cartao">Cartão na Entrega</option>
            </select>

            <p><strong>Entregar em:</strong> {{ current_user.cliente.enderecos or 'Endereço não cadastrado' }}</p>
            <button type="submit"
                style="background-color: #28a745; color: white; padding: 10px 20px; border: none; width: 100%; cursor: pointer;">
                CONFIRMAR PEDIDO
            </button>
        </form>
    </div>
</div>
{% endblock %}